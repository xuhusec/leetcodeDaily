### [505. The Maze II](https://leetcode.com/problems/the-maze-ii/)

#### Solution 1: Dijkstra

The problem is asking in a m * n maze, the shortest distance a ball from a given start point ot the end point. It can only travels in up, down, left and right direction. And it won't stop until it hits the wall. A wall can be a cell with value as 1 (the value is either 1 or 0) or hits the boundary of the matrix. That means even though it may pass the end point but not stop at the end point. That would not counted as reach the end point. Only when it stops at the end point, it reaches the destination. And the distance is the number of cells passed by from the start point to the destination. If we cannot reach the destination return -1.

Because only when a ball stops, it counts. The only node we should check it when the ball stops. So the problem can be converted to a graph. The node is the points that the ball can stop and the weight of edge between two nodes is the number of cells between them directly. Then the problem is a shortest path problem. So we can solve it with Dijkstra. The only difference from a normal Dijkstra is that the weight and the adjacent links are not known. we need to explore them by ourselves in each round. And that is simple, you can just travel until it stops with a given direction and repeat for all other directions. The weight is the number of cells we passed through.

The above is the basic idea. I also made some minor improvement. I also track the direction how the points is reached and skip the reverse direction in the explore new node process. I define the directions as `DIRS = {{0,1},{0,-1},{1,0},{-1,0}}` or right, left, up and down. for the first two the reverse direction si 1 - i where i >= 0 and i < =1. or 5 - i where i >= 2 and i <=3. But the start point comes from no direction. I specify it as -1 or once it is -1 we should not continue to find the reverse direction. Of course, it is still good without it. 
Another is the check if the node is alreay in the shortest path when try to add it to the queue. If the shortest path from the start to a node is already defined. we cannot do better and this node can be safely ignored.